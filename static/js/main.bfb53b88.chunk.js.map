{"version":3,"sources":["serviceWorker.js","utils/constants.js","database/index.js","utils/index.js","useGlobalState.js","components/Header.jsx","components/FormInput.jsx","components/FormAutocomplete.jsx","components/FormAutocompleteMulti.jsx","components/FormAttributes.jsx","components/FormAlignment.jsx","components/FormCheckbox.jsx","components/Form.jsx","components/Refreshing.jsx","components/CodeDialog.jsx","firebase/index.js","components/ImportDialog.jsx","components/PrintDialog.jsx","components/SaveDialog.jsx","components/App.jsx","index.js"],"names":["Boolean","window","location","hostname","match","SCREENS","FORM","Symbol","PRINT","REFRESH","DIALOGS","CODE","IMPORT","SAVE","ATTRIBUTES","str","dex","con","int","wis","cha","TYPES","ALIGNMENT","ALIGNMENT_POSITION","BACKSTORY","CHARACTER_NAME","CLASS","DATE","FAMILIAR","FAMILIAR_NAME","FAMILIAR_POWER","FIENDS","FIENDS_BANISHED","GENDER","GOLD","MARKET_ARMOR","MARKET_WEAPON","MARKET_SKILL","MARKET_SCROLL","MARKET_TRAIT","MINION","MONSTER","MONSTER_ATTACK","MONSTER_LOCATION","MONSTER_OBSTACLE","MONSTER_SCORE","MONSTER_LENTICULAR","PLAYER","RACE","SCORE","XP","GLOBAL_STATE_ALIAS","FORM_LABELS","typeaheadCache","marketCahce","adventureCache","switcher","ALIGNMENTS","BACKSTORIES","CLASSES","FAMILIARS","GENDERS","filterDataByKind","MARKET","MINIONS","ADVENTURE","RACES","getTypeahead","type","undefined","data","typeheadData","Object","values","map","entry","value","id","text","name","sortedTypeaheadData","orderBy","getAdventureTypeahead","monsterName","reduce","acc","monster","push","getHashData","kind","cache","forEach","card","removeFalsy","item","determineCharacterCompletion","tome","characterName","player","race","class","backstory","alignment","attributes","some","attr","monsterLocation","monsterObstacle","monsterAttack","familiar","familiarPower","getCharacterJsonApi","character","gender","getAttributeScores","getRPAAttributeScores","getAlignmentScore","alignmentPos","items","armor","sort","filter","weapons","scrolls","skills","traits","battle","isLenticularVersion","obstacle","attack","minions","score","Number","monsterScore","species","familiarName","power","fiends","active","banished","counts","experience","xp","gold","health","getHealth","meta","date","Date","getMonsterAdventureData","dict","typeahead","getCharacterTextString","result","getLine","length","separator","Array","fill","join","addSection","title","sLine","toUpperCase","addSubSection","ssLine","addText","addListItem","addList","list","i","titleLine","addTitle","attributesObj","raceId","rpAttributes","rpaAttributes","addDice","getCombinedAttributeScores","addLine","alignmentObj","num","addLineBreak","raceData","getAttrValue","val","alignmentId","position","aligmentData","split","titles","0","1","2","3","4","5","6","7","8","fiendsCount","getTodaysDate","now","day","getDate","month","getMonth","year","getFullYear","getEntryById","o","initialState","activeDialog","screen","color","characterObject","deserializedCharacter","isCharacterGenerated","isCharacterComplete","isSavingEnabled","characterId","fiendsBanished","createGlobalState","useGlobalState","setGlobalStateCGS","setGlobalState","setState","resetGlobalState","setTimeout","getCompleteGlobalState","getState","setCompleteGlobalState","Header","setActiveDialog","setIsSavingEnabled","useState","saveClickCount","setSaveClickCount","iconColor","className","IconButton","aria-label","onClick","style","v","FormInput","inputType","classModifier","setEntry","FormControl","TextField","label","onChange","event","target","defaultValue","FormAutocomplete","isDisabled","entryDict","entryTypeahead","Autocomplete","options","getOptionLabel","option","getOptionSelected","renderInput","params","onInputChange","index","getAttribute","_","selectedEntry","disabled","autoHighlight","FormAutocompleteMulti","ids","multiple","includes","filterSelectedOptions","variant","newInput","FormAttributes","entries","key","Attribute","modifier","setAttributes","total","s","readOnly","min","max","FormAlignment","setAlignment","setAlignmentPos","alignmentDict","alignmentTypeahead","handleChangeAlignmentPos","alignmentGridPlaceholder","alignmentModifiers","activeModifiers","activeClass","FormCheckbox","FormControlLabel","control","Checkbox","checked","Form","characterClass","setColor","adventureData","setAdventureData","useEffect","classId","getClassColor","CircularProgressWithLabel","Box","display","CircularProgress","top","left","bottom","right","alignItems","justifyContent","Typography","component","Math","round","Refreshing","progress","setProgress","timer","setInterval","prevProgress","REFRESH_TIMER","clearInterval","Transition","forwardRef","props","ref","Slide","direction","CodeDialog","setCharacterObject","setIsCharacterComplete","setIsCharacterGenerated","referenceObj","err","console","error","handleCloseDialog","saveTextFile","useCallback","a","document","createElement","file","Blob","href","URL","createObjectURL","toLowerCase","download","click","Dialog","open","TransitionComponent","keepMounted","onClose","DialogTitle","DialogContent","JSON","stringify","DialogActions","Button","fb","firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","API_FUNCTIONS","functions","API","database","getCharacters","httpsCallable","ImportDialog","setScreen","isLoading","setIsLoading","selectedCharacterId","setSelectedCharacterId","characters","setCharacters","response","handleSelectCharacter","selectedClass","c","alternativeLenticularVersion","loadCharacterFromDatabase","PrintDialog","handlePrint","localStorage","setItem","DialogContentText","saveCharacter","updateCharacter","SaveDialog","setCharacterId","setDeserializedCharacter","isLoggedIn","setIsLoggedIn","pw","setPW","email","setEmail","deserializeCharacter","handleSave","Error","alert","e","activeComponent","activeDialogComponent","App","Container","maxWidth","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.bfb53b88.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","export const SCREENS = {\n  FORM: Symbol('FORM'),\n  PRINT: Symbol('PRINT'),\n  REFRESH: Symbol('REFRESH'),\n};\n\nexport const DIALOGS = {\n  CODE: Symbol('CODE'),\n  PRINT: Symbol('PRINT'),\n  IMPORT: Symbol('IMPORT'),\n  SAVE: Symbol('SAVE'),\n};\n\nexport const GENDERS = {\n  FEMALE: 'FEMALE',\n  MALE: 'MALE',\n  UNKNOWN: 'UNKNOWN',\n};\n\nexport const REFRESH_TIMER = 800;\n\nexport const ATTRIBUTES = {\n  str: 'Strength',\n  dex: 'Dexterity',\n  con: 'Constitution',\n  int: 'Intelligence',\n  wis: 'Wisdom',\n  cha: 'Charisma',\n};\n\nexport const TYPES = {\n  ALIGNMENT: Symbol('ALIGNMENT'),\n  ALIGNMENT_POSITION: Symbol('ALIGNMENT_POSITION'),\n  ATTRIBUTES: Symbol('ATTRIBUTES'),\n  BACKSTORY: Symbol('BACKSTORY'),\n  CHARACTER_NAME: Symbol('CHARACTER_NAME'),\n  CLASS: Symbol('CLASS'),\n  DATE: Symbol('DATE'),\n  FAMILIAR: Symbol('FAMILIAR'),\n  FAMILIAR_NAME: Symbol('FAMILIAR_NAME'),\n  FAMILIAR_POWER: Symbol('FAMILIAR_POWER'),\n  FIENDS: Symbol('FIENDS'),\n  FIENDS_BANISHED: Symbol('FIENDS_BANISHED'),\n  GENDER: Symbol('GENDER'),\n  GOLD: Symbol('GOLD'),\n  MARKET_ARMOR: Symbol('MARKET_ARMOR'),\n  MARKET_WEAPON: Symbol('MARKET_WEAPON'),\n  MARKET_SKILL: Symbol('MARKET_SKILL'),\n  MARKET_SCROLL: Symbol('MARKET_SCROLL'),\n  MARKET_TRAIT: Symbol('MARKET_TRAIT'),\n  MINION: Symbol('MINION'),\n  MONSTER: Symbol('MONSTER'),\n  MONSTER_ATTACK: Symbol('MONSTER_ATTACK'),\n  MONSTER_LOCATION: Symbol('MONSTER_LOCATION'),\n  MONSTER_OBSTACLE: Symbol('MONSTER_OBSTACLE'),\n  MONSTER_SCORE: Symbol('MONSTER_SCORE'),\n  MONSTER_LENTICULAR: Symbol('MONSTER_LENTICULAR'),\n  PLAYER: Symbol('PLAYER'),\n  RACE: Symbol('RACE'),\n  SCORE: Symbol('SCORE'),\n  XP: Symbol('XP'),\n};\n\nexport const GLOBAL_STATE_ALIAS = {\n  [TYPES.ALIGNMENT]: 'alignment',\n  [TYPES.ALIGNMENT_POSITION]: 'alignmentPos',\n  [TYPES.ATTRIBUTES]: 'attributes',\n  [TYPES.XP]: 'xp',\n  [TYPES.RACE]: 'race',\n  [TYPES.CLASS]: 'class',\n  [TYPES.CHARACTER_NAME]: 'characterName',\n  [TYPES.DATE]: 'date',\n  [TYPES.FAMILIAR]: 'familiar',\n  [TYPES.FAMILIAR_NAME]: 'familiarName',\n  [TYPES.FAMILIAR_POWER]: 'familiarPower',\n  [TYPES.FIENDS]: 'fiends',\n  [TYPES.FIENDS_BANISHED]: 'fiendsBanished',\n  [TYPES.GENDER]: 'gender',\n  [TYPES.GOLD]: 'gold',\n  [TYPES.BACKSTORY]: 'backstory',\n  [TYPES.MARKET_ARMOR]: 'armor',\n  [TYPES.MARKET_WEAPON]: 'weapons',\n  [TYPES.MARKET_SKILL]: 'skills',\n  [TYPES.MARKET_SCROLL]: 'scrolls',\n  [TYPES.MARKET_TRAIT]: 'traits',\n  [TYPES.MINION]: 'minions',\n  [TYPES.MONSTER]: 'monster',\n  [TYPES.MONSTER_ATTACK]: 'monsterAttack',\n  [TYPES.MONSTER_LOCATION]: 'monsterLocation',\n  [TYPES.MONSTER_OBSTACLE]: 'monsterObstacle',\n  [TYPES.MONSTER_SCORE]: 'monsterScore',\n  [TYPES.MONSTER_LENTICULAR]: 'isLenticularVersion',\n  [TYPES.PLAYER]: 'player',\n  [TYPES.SCORE]: 'score',\n  [TYPES.XP]: 'xp',\n};\n\nexport const FORM_LABELS = {\n  [TYPES.RACE]: 'Race',\n  [TYPES.CLASS]: 'Class',\n  [TYPES.CHARACTER_NAME]: 'Character Name',\n  [TYPES.DATE]: 'Date',\n  [TYPES.FAMILIAR]: 'Familiar',\n  [TYPES.FAMILIAR_NAME]: 'Familiar Name',\n  [TYPES.FAMILIAR_POWER]: 'Power',\n  [TYPES.FIENDS]: 'Fiends',\n  [TYPES.FIENDS_BANISHED]: 'Banished Fiends',\n  [TYPES.GENDER]: 'Gender',\n  [TYPES.GOLD]: 'Gold',\n  [TYPES.BACKSTORY]: 'Backstory',\n  [TYPES.MARKET_ARMOR]: 'Armor',\n  [TYPES.MARKET_WEAPON]: 'Weapons',\n  [TYPES.MARKET_SKILL]: 'Skills',\n  [TYPES.MARKET_SCROLL]: 'Scrolls',\n  [TYPES.MARKET_TRAIT]: 'Traits',\n  [TYPES.MINION]: 'Trophies (Minions)',\n  [TYPES.MONSTER]: 'Monster',\n  [TYPES.MONSTER_ATTACK]: 'Attack',\n  [TYPES.MONSTER_LOCATION]: 'Location',\n  [TYPES.MONSTER_OBSTACLE]: 'Obstacle',\n  [TYPES.MONSTER_SCORE]: 'Monster Score',\n  [TYPES.MONSTER_LENTICULAR]: 'Lenticular Version',\n  [TYPES.PLAYER]: 'Player',\n  [TYPES.SCORE]: 'Final Score',\n  [TYPES.XP]: 'XP',\n};\n","import { orderBy } from 'lodash-es';\n\n// Data\nimport ADVENTURE from './adventure.json';\nimport ALIGNMENTS from './alignments.json';\nimport BACKSTORIES from './backstories.json';\nimport CLASSES from './classes.json';\nimport FAMILIARS from './familiars.json';\nimport FIENDS from './fiends.json';\nimport GENDERS from './genders.json';\nimport MARKET from './market.json';\nimport MINIONS from './minions.json';\nimport MONSTER from './monsters.json';\nimport RACES from './races.json';\n\n// Utils\nimport { TYPES } from '../utils/constants';\n\nconst typeaheadCache = {};\nconst marketCahce = {};\nconst adventureCache = {};\n\nconst switcher = {\n  [TYPES.ALIGNMENT]: ALIGNMENTS,\n  [TYPES.BACKSTORY]: BACKSTORIES,\n  [TYPES.CLASS]: CLASSES,\n  [TYPES.FAMILIAR]: FAMILIARS,\n  [TYPES.FIENDS]: FIENDS,\n  [TYPES.GENDER]: GENDERS,\n  [TYPES.MARKET_ARMOR]: filterDataByKind('Armor', MARKET, marketCahce),\n  [TYPES.MARKET_SCROLL]: filterDataByKind('Scroll', MARKET, marketCahce),\n  [TYPES.MARKET_SKILL]: filterDataByKind('Skill', MARKET, marketCahce),\n  [TYPES.MARKET_TRAIT]: filterDataByKind('Trait', MARKET, marketCahce),\n  [TYPES.MARKET_WEAPON]: filterDataByKind('Weapon', MARKET, marketCahce),\n  [TYPES.MINION]: MINIONS,\n  [TYPES.MONSTER]: MONSTER,\n  [TYPES.MONSTER_LOCATION]: filterDataByKind('location', ADVENTURE, adventureCache),\n  [TYPES.MONSTER_OBSTACLE]: filterDataByKind('obstacle', ADVENTURE, adventureCache),\n  [TYPES.MONSTER_ATTACK]: filterDataByKind('attack', ADVENTURE, adventureCache),\n  [TYPES.RACE]: RACES,\n};\n\nexport function getTypeahead(type) {\n  if (typeaheadCache[type] === undefined) {\n    const data = switcher[type];\n\n    const typeheadData = Object.values(data).map((entry) => ({\n      value: entry.id,\n      text: entry.name,\n    }));\n\n    const sortedTypeaheadData = orderBy(typeheadData, 'text');\n\n    typeaheadCache[type] = sortedTypeaheadData;\n  }\n\n  return typeaheadCache[type];\n}\n\nexport function getAdventureTypeahead(data, monsterName) {\n  return Object.values(data).reduce((acc, entry) => {\n    if (entry.monster === monsterName) {\n      acc.push({\n        value: entry.id,\n        text: entry.name,\n      });\n    }\n    return acc;\n  }, []);\n}\n\nexport function getHashData(type) {\n  return switcher[type];\n}\n\nfunction filterDataByKind(kind, data, cache) {\n  if (cache[kind] === undefined) {\n    Object.values(data).forEach((card) => {\n      if (cache[card.kind] === undefined) {\n        cache[card.kind] = {};\n      }\n\n      cache[card.kind][card.id] = card;\n    });\n  }\n\n  return cache[kind];\n}\n","import { getHashData, getAdventureTypeahead } from '../database';\nimport { TYPES } from './constants';\n\nconst removeFalsy = (item) => item;\n\n/**\n * Check if all required fields in a character object are filled\n * @param {object} tome the object with the tome data\n * @returns {boolean}\n */\nexport function determineCharacterCompletion(tome) {\n  // If text fields are empty\n  if (!tome.characterName || !tome.player) return false;\n\n  // If mandatory fields are empty\n  if (!tome.race || !tome.class || !tome.backstory || !tome.alignment) return false;\n\n  // If attributes are less than 3\n  if (Object.values(tome.attributes).some((attr) => attr < 3)) return false;\n\n  // If monster, but no location, obstacle, or attack\n  if (tome.monster && (!tome.monsterLocation || !tome.monsterObstacle || !tome.monsterAttack))\n    return false;\n\n  // If has familiar, but power is less then 3\n  if (tome.familiar && tome.familiarPower < 3) return false;\n\n  return true;\n}\n\n/**\n * Parses a character tome object to be database ready before saving\n * @param {object} tome the object with the tome data\n * @returns {object}\n */\nexport function deserializeCharacter(tome) {\n  const result = {\n    id: tome.characterId,\n    name: tome.characterName,\n    race: tome.race,\n    class: tome.class,\n    gender: tome.gender,\n    backstory: tome.backstory,\n    'attribute-scores': tome.attributes,\n    alignment: {\n      id: tome.alignment,\n      position: Number(tome.alignmentPos),\n    },\n    items: {\n      armor: tome.armor?.sort(),\n      weapons: tome.weapons?.sort(),\n      scrolls: tome.scrolls?.sort(),\n    },\n    skills: tome.skills?.sort(),\n    traits: tome.traits?.sort(),\n    battle: {\n      monster: tome.monster,\n      alternativeLenticularVersion: tome.isLenticularVersion || null,\n      location: tome.monsterLocation,\n      obstacle: tome.monsterObstacle,\n      attack: tome.monsterAttack,\n      minions: tome.minions?.sort(),\n      score: Number(tome.monsterScore),\n    },\n    fiends: tome.fiends?.sort(),\n    counts: {\n      experience: Number(tome.xp),\n      gold: Number(tome.gold),\n      score: Number(tome.score),\n    },\n    player: tome.player,\n    'created-at': tome.date ?? getTodaysDate(),\n  };\n\n  if (tome.familiar) {\n    result.familiar = {\n      id: tome.familiar,\n      name: tome.familiarName ?? 'Unnamed',\n      power: Number(tome.familiarPower),\n    };\n  }\n\n  return result;\n}\n\n/**\n * Parses a character tome object to JsonApi format\n * @param {object} tome the object with the tome data\n * @return {object}\n */\nexport function getCharacterJsonApi(tome) {\n  return {\n    id: tome.character ?? null,\n    type: 'roll-player-character',\n    attributes: {\n      name: tome.characterName,\n      race: getHashData(TYPES.RACE)[tome.race]?.name ?? '',\n      class: getHashData(TYPES.CLASS)[tome.class]?.name ?? '',\n      gender: getHashData(TYPES.GENDER)[tome.gender]?.name ?? 'Unkown',\n      backstory: getHashData(TYPES.BACKSTORY)[tome.backstory]?.name ?? '',\n      'attribute-rp-scores': getAttributeScores(tome.attributes, tome.race),\n      'attribute-rpa-scores': getRPAAttributeScores(tome.attributes, tome.race),\n      alignment: getAlignmentScore(tome.alignment, tome.alignmentPos),\n      items: {\n        armor: tome.armor\n          .map((id) => getHashData(TYPES.MARKET_ARMOR)[id]?.name ?? '')\n          .sort()\n          .filter(removeFalsy),\n        weapons: tome.weapons\n          .map((id) => getHashData(TYPES.MARKET_WEAPON)[id]?.name ?? '')\n          .sort()\n          .filter(removeFalsy),\n        scrolls: tome.scrolls\n          .map((id) => getHashData(TYPES.MARKET_SCROLL)[id]?.name ?? null)\n          .sort()\n          .filter(removeFalsy),\n      },\n      skills: tome.skills\n        .map((id) => getHashData(TYPES.MARKET_SKILL)[id]?.name ?? '')\n        .sort()\n        .filter(removeFalsy),\n      traits: tome.traits\n        .map((id) => getHashData(TYPES.MARKET_TRAIT)[id]?.name ?? '')\n        .sort()\n        .filter(removeFalsy),\n      battle: {\n        monster: `${getHashData(TYPES.MONSTER)[tome.monster]?.name ?? ''}${\n          tome.isLenticularVersion ? ' (Lenticular version)' : ''\n        }`,\n        location: getHashData(TYPES.MONSTER_LOCATION)[tome.monsterLocation]?.name ?? '',\n        obstacle: getHashData(TYPES.MONSTER_OBSTACLE)[tome.monsterObstacle]?.name ?? '',\n        attack: getHashData(TYPES.MONSTER_ATTACK)[tome.monsterAttack]?.name ?? '',\n        minions: tome.minions\n          .map((id) => getHashData(TYPES.MINION)[id]?.name ?? '')\n          .sort()\n          .filter(removeFalsy),\n        score: Number(tome.monsterScore) ?? 0,\n      },\n      familiar: {\n        species: getHashData(TYPES.FAMILIAR)[tome.familiar]?.name ?? '',\n        name: tome.familiarName,\n        power: Number(tome.familiarPower),\n      },\n      fiends: {\n        active: tome.fiends\n          .map((id) => getHashData(TYPES.FIENDS)[id]?.name ?? '')\n          .sort()\n          .filter(removeFalsy),\n        banished: [],\n        // banished: tome.fiendsBanished((id) =>  getHa)\n      },\n      counts: {\n        experience: Number(tome.xp),\n        gold: Number(tome.gold),\n        score: Number(tome.score),\n        health: getHealth(tome.score, tome.fiends),\n      },\n    },\n    meta: {\n      'created-by': tome.player,\n      'created-at': tome.date ?? new Date(),\n    },\n  };\n}\n\n/**\n * Gets the specific adventure data (location, obstable, attack) based on the given monster name\n * @param {symbol} type the type symbol\n * @param {string} monsterName the monster name\n * @returns {object} the hash dictionary and typeahead for the adventure type\n */\nexport function getMonsterAdventureData(type, monsterName) {\n  const dict = getHashData(type);\n  return {\n    dict,\n    typeahead: getAdventureTypeahead(dict, monsterName),\n  };\n}\n\nexport function getCharacterTextString(tome) {\n  let result = '';\n\n  function getLine(length, separator = '-') {\n    return `${new Array(length).fill(separator).join('')}`;\n  }\n\n  function addLine(length = 15) {\n    result += getLine(length);\n  }\n\n  function addTitle(title) {\n    const titleLine = getLine(title.length, '=');\n    result += `\\n${titleLine}\\n${title.toUpperCase()}\\n${titleLine}\\n\\n`;\n  }\n\n  function addSection(title) {\n    const sLine = getLine(title.length, '-');\n    result += `\\n${sLine.toUpperCase()}\\n${title.toUpperCase()}\\n${sLine}\\n\\n`;\n  }\n\n  function addSubSection(title) {\n    const ssLine = getLine(title.length, '-');\n    result += `\\n${title.toUpperCase()}\\n${ssLine}\\n\\n`;\n  }\n\n  function addText(text) {\n    result += `${text}\\n`;\n  }\n\n  function addListItem(item) {\n    result += `    - ${item}\\n`;\n  }\n\n  function addList(list = []) {\n    if (list.length === 0) {\n      result += 'N/A\\n';\n    } else {\n      for (let i = 0; i < list.length; i++) {\n        addListItem(list[i]);\n      }\n    }\n  }\n\n  function addLineBreak(num = 1) {\n    for (let i = 0; i < num; i++) {\n      result += '\\n';\n    }\n  }\n\n  // BUILD\n  addTitle('Roll Player Hero Tome');\n  addText(`Created by ${tome.player} on ${tome.date}`);\n  addSection(`Character: ${tome.characterName}`);\n  addText(`Race: ${getHashData(TYPES.RACE)[tome.race]?.name}`);\n  addText(`Class: ${getHashData(TYPES.CLASS)[tome.class]?.name}`);\n  addText(`Gender: ${getHashData(TYPES.GENDER)[tome.gender]?.name}`);\n  addText(`Backstory: ${getHashData(TYPES.BACKSTORY)[tome.backstory]?.name}`);\n  addSubSection('Attributes');\n  const attributesObj = getCombinedAttributeScores(tome.attributes, tome.race);\n  addText(`STR = ${attributesObj.str[1]} (${attributesObj.str[0]})`);\n  addText(`DEX = ${attributesObj.dex[1]} (${attributesObj.dex[0]})`);\n  addText(`CON = ${attributesObj.con[1]} (${attributesObj.con[0]})`);\n  addText(`INT = ${attributesObj.int[1]} (${attributesObj.int[0]})`);\n  addText(`WIS = ${attributesObj.wis[1]} (${attributesObj.wis[0]})`);\n  addText(`CHA = ${attributesObj.cha[1]} (${attributesObj.cha[0]})`);\n  if (attributesObj.addDice) {\n    addLine(\n      `\\n// Add ${attributesObj.addDice} to any attribute score before playing Roll Player Adventures`\n    );\n  }\n  addSubSection('Alignment');\n  const alignmentObj = getAlignmentScore(tome.alignment, tome.alignmentPos);\n  addText(`${alignmentObj.name} (${alignmentObj.title})`);\n  addText(`Points: ${alignmentObj.score}`);\n  addSection('Stats');\n  addListItem(`Health: ${getHealth(tome.score, tome.fiends)}`);\n  addListItem(`Experience: ${tome.xp}`);\n  addListItem(`Gold: ${tome.gold}`);\n  addSection('Items/Abilities');\n  addSubSection('Armor');\n  addList(tome.armor.map((id) => getHashData(TYPES.MARKET_ARMOR)[id]?.name ?? '').sort());\n  addSubSection('Weapons');\n  addList(tome.weapons.map((id) => getHashData(TYPES.MARKET_WEAPON)[id]?.name ?? '').sort());\n  addSubSection('Scrolls');\n  addList(tome.scrolls.map((id) => getHashData(TYPES.MARKET_SCROLL)[id]?.name ?? '').sort());\n  addSubSection('Skills');\n  addList(tome.skills.map((id) => getHashData(TYPES.MARKET_SKILL)[id]?.name ?? '').sort());\n  addSubSection('Traits');\n  addList(tome.traits.map((id) => getHashData(TYPES.MARKET_TRAIT)[id]?.name ?? '').sort());\n  addSection('Familiar');\n  if (tome.familiarName) {\n    addText(\n      `${tome.familiarName}, the ${\n        getHashData(TYPES.FAMILIAR)[tome.familiar]?.species ?? ''\n      } (Power: ${tome.familiarPower})`\n    );\n  } else {\n    addText(\n      `${getHashData(TYPES.FAMILIAR)[tome.familiar]?.species ?? ''} (Power: ${tome.familiarPower})`\n    );\n  }\n  addSection('Enemies');\n  addSubSection(`Monter: ${getHashData(TYPES.MONSTER)[tome.monster]?.name ?? ''}`);\n  addListItem(`Location: ${getHashData(TYPES.MONSTER_LOCATION)[tome.monsterLocation]?.name ?? ''}`);\n  addListItem(`Obstacle: ${getHashData(TYPES.MONSTER_OBSTACLE)[tome.monsterObstacle]?.name ?? ''}`);\n  addListItem(`Attack: ${getHashData(TYPES.MONSTER_ATTACK)[tome.monsterAttack]?.name ?? ''}`);\n  addListItem(`Monster Score: ${tome.monsterScore || 'Unknown'}`);\n  addSubSection('Minions');\n  addList(tome.minions.map((id) => getHashData(TYPES.MINION)[id]?.name ?? '').sort());\n  addSubSection('Fiends');\n  addList(tome.fiends.map((id) => getHashData(TYPES.FIENDS)[id]?.name ?? '').sort());\n  addLineBreak(2);\n  addSection('Final Score');\n  addText(`${tome.score} reputation stars`);\n  return result;\n}\n\nfunction getAttributeScores(attributes, raceId) {\n  const raceData = getHashData(TYPES.RACE)?.[raceId];\n\n  return {\n    str: (attributes.str ?? 0) + (raceData?.str ?? 0),\n    dex: (attributes.dex ?? 0) + (raceData?.dex ?? 0),\n    con: (attributes.con ?? 0) + (raceData?.con ?? 0),\n    int: (attributes.int ?? 0) + (raceData?.int ?? 0),\n    wis: (attributes.wis ?? 0) + (raceData?.wis ?? 0),\n    cha: (attributes.cha ?? 0) + (raceData?.cha ?? 0),\n  };\n}\n\nfunction getRPAAttributeScores(attributes, raceId) {\n  const rpAttributes = getAttributeScores(attributes, raceId);\n\n  function getAttrValue(val) {\n    if (val < 14) return 0;\n    if (val < 16) return 1;\n    if (val < 18) return 2;\n    return 3;\n  }\n\n  return {\n    str: getAttrValue(rpAttributes.str),\n    dex: getAttrValue(rpAttributes.dex),\n    con: getAttrValue(rpAttributes.con),\n    int: getAttrValue(rpAttributes.int),\n    wis: getAttrValue(rpAttributes.wis),\n    cha: getAttrValue(rpAttributes.cha),\n  };\n}\n\nfunction getCombinedAttributeScores(attributes, raceId) {\n  const rpAttributes = getAttributeScores(attributes, raceId);\n  const rpaAttributes = getRPAAttributeScores(attributes, raceId);\n\n  const addDice = Object.values(rpaAttributes).reduce((acc, entry) => {\n    acc -= entry;\n    if (acc < 0) acc = 0;\n    return acc;\n  }, 6);\n\n  return {\n    str: [rpAttributes.str, rpaAttributes.str],\n    dex: [rpAttributes.dex, rpaAttributes.dex],\n    con: [rpAttributes.con, rpaAttributes.con],\n    int: [rpAttributes.int, rpaAttributes.int],\n    wis: [rpAttributes.wis, rpaAttributes.wis],\n    cha: [rpAttributes.cha, rpaAttributes.cha],\n    addDice,\n  };\n}\n\nfunction getAlignmentScore(alignmentId, position = 4) {\n  const aligmentData = getHashData(TYPES.ALIGNMENT)?.[alignmentId];\n\n  const values = aligmentData?.values?.split(',').map(Number) ?? [];\n\n  const titles = {\n    0: 'Lawful-Good',\n    1: 'Neutral-Good',\n    2: 'Chaotic-Good',\n    3: 'Lawful-Neutral',\n    4: 'Neutraul-Neutral',\n    5: 'Chaotic-Neutral',\n    6: 'Lawful-Evil',\n    7: 'Neutral-Evil',\n    8: 'Chaotic-Evil',\n  };\n\n  return {\n    name: aligmentData?.name ?? '',\n    title: titles[position],\n    score: values[position],\n  };\n}\n\nfunction getHealth(score, fiends) {\n  const fiendsCount = fiends.length;\n\n  if (score < 21) return 14 - fiendsCount;\n  if (score < 26) return 15 - fiendsCount;\n  if (score < 36) return 16 - fiendsCount;\n  if (score < 41) return 17 - fiendsCount;\n  return 18 - fiendsCount;\n}\n\nexport function loadCharacterFromDatabase(characters, id, initialState) {\n  // Find character\n  const character = characters.filter((c) => c.id === id)[0];\n\n  const state = {\n    ...initialState,\n    alignment: character.alignment.id,\n    alignmentPos: character.alignment.position,\n    armor: character?.items.armor ?? [],\n    attributes: {\n      str: character['attribute-scores'].str ?? 0,\n      dex: character['attribute-scores'].dex ?? 0,\n      con: character['attribute-scores'].con ?? 0,\n      int: character['attribute-scores'].int ?? 0,\n      wis: character['attribute-scores'].wis ?? 0,\n      cha: character['attribute-scores'].cha ?? 0,\n    },\n    backstory: character.backstory,\n    characterId: character.id,\n    characterName: character.name,\n    class: character.class,\n    date: character['created-at'],\n    familiar: character.familiar.id,\n    familiarPower: Number(character.familiar.power ?? 0),\n    familiarName: character.familiar.name,\n    fiends: character?.fiends ?? [],\n    gender: character.gender,\n    gold: Number(character.counts.gold),\n    minions: character?.battle?.minions ?? [],\n    monster: character?.battle?.monster ?? null,\n    monsterAttack: character?.battle?.attack ?? null,\n    monsterLocation: character?.battle?.location ?? null,\n    monsterObstacle: character?.battle?.obstacle ?? null,\n    monsterScore: character?.battle?.score ?? 0,\n    isLenticularVersion: character?.battle?.alternativeLenticularVersion ?? false,\n    player: character?.player,\n    race: character.race,\n    score: Number(character.counts.score),\n    scrolls: character?.items.scrolls ?? [],\n    skills: character?.skills ?? [],\n    traits: character?.traits ?? [],\n    weapons: character?.items.weapons ?? [],\n    xp: 0,\n  };\n\n  return state;\n}\n\nexport function getTodaysDate() {\n  const now = new Date();\n  let day = now.getDate();\n  let month = now.getMonth() + 1;\n  const year = now.getFullYear();\n\n  if (month < 10) month = `0${month}`;\n  if (day < 10) day = `0${day}`;\n\n  return `${year}-${month}-${day}`;\n}\n\nexport function getEntryById(list, id) {\n  return list.filter((o) => o.value === id)[0];\n}\n\nexport function getEntriesByIds(list, ids) {\n  return list.filter((o) => ids.includes(o.value));\n}\n\nexport function getClassColor(classId) {\n  return getHashData(TYPES.CLASS)[classId]?.color ?? null;\n}\n","import { createGlobalState } from 'react-hooks-global-state';\n\nimport { SCREENS, REFRESH_TIMER } from './utils/constants';\nimport { getTodaysDate } from './utils';\n\nexport const initialState = {\n  // App Global\n  activeDialog: null,\n  screen: SCREENS.FORM,\n  color: null,\n\n  // App\n  characterObject: null,\n  deserializedCharacter: null,\n  isCharacterGenerated: false,\n  isCharacterComplete: false,\n  isSavingEnabled: false,\n\n  // Character Fields\n  characterId: null,\n  characterName: '',\n  player: '',\n  race: null,\n  class: null,\n  gender: null,\n  backstory: null,\n  attributes: {\n    str: 0,\n    dex: 0,\n    con: 0,\n    int: 0,\n    wis: 0,\n    cha: 0,\n  },\n  alignment: null,\n  alignmentPos: 4,\n  weapons: [],\n  armor: [],\n  skills: [],\n  traits: [],\n  scrolls: [],\n  minions: [],\n  xp: 0,\n  gold: 0,\n  score: 0,\n  date: getTodaysDate(),\n  familiar: null,\n  familiarName: null,\n  familiarPower: 0,\n  fiends: [],\n  fiendsBanished: [],\n  monster: null,\n  monsterLocation: null,\n  monsterObstacle: null,\n  monsterAttack: null,\n  monsterScore: 0,\n  isLenticularVersion: false,\n};\n\nconst { useGlobalState, setGlobalState: setGlobalStateCGS, setState, getState } = createGlobalState(\n  initialState\n);\n\nexport function resetGlobalState() {\n  setGlobalState('screen', SCREENS.REFRESH);\n  setTimeout(() => {\n    setState({ ...initialState });\n  }, REFRESH_TIMER);\n}\n\nexport const getCompleteGlobalState = getState;\n\nexport const setGlobalState = setGlobalStateCGS;\n\nexport const setCompleteGlobalState = setState;\n\nexport default useGlobalState;\n","import React, { Fragment, useState } from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport PrintIcon from '@material-ui/icons/Print';\nimport SaveIcon from '@material-ui/icons/Save';\nimport CodeIcon from '@material-ui/icons/Code';\nimport ListAltIcon from '@material-ui/icons/ListAlt';\nimport RotateLeftIcon from '@material-ui/icons/RotateLeft';\n\nimport useGlobalState, { resetGlobalState } from '../useGlobalState';\nimport { DIALOGS } from '../utils/constants';\n\nexport default function Header() {\n  const [, setActiveDialog] = useGlobalState('activeDialog');\n  const [isSavingEnabled, setIsSavingEnabled] = useGlobalState('isSavingEnabled');\n  const [color] = useGlobalState('color');\n  // Local state\n  const [saveClickCount, setSaveClickCount] = useState(0);\n\n  const handleEditClick = () => {\n    if (!isSavingEnabled) {\n      setSaveClickCount((v) => ++v);\n      if (saveClickCount > 1) {\n        setIsSavingEnabled(true);\n      }\n    }\n  };\n\n  const handleOpenPrintDialog = () => {\n    setActiveDialog(DIALOGS.PRINT);\n  };\n\n  const handleOpenCodeDialog = () => {\n    setActiveDialog(DIALOGS.CODE);\n  };\n\n  const handleOpenImportDialog = () => {\n    setActiveDialog(DIALOGS.IMPORT);\n  };\n\n  const handleOpenSaveDialog = () => {\n    setActiveDialog(DIALOGS.SAVE);\n  };\n\n  const iconColor = color === 'white' || !color ? '#232c33' : '#ffffff';\n\n  return (\n    <header className={`header app-color--${color}`}>\n      <IconButton className=\"header-button\" aria-label=\"reset\" onClick={resetGlobalState}>\n        <RotateLeftIcon style={{ color: iconColor }} />\n      </IconButton>\n      <h1 onClick={handleEditClick}>Roll Player: Hero Tome</h1>\n      {isSavingEnabled && (\n        <Fragment>\n          <IconButton\n            className=\"header-button\"\n            aria-label=\"import\"\n            onClick={handleOpenImportDialog}\n          >\n            <ListAltIcon style={{ color: iconColor }} />\n          </IconButton>\n          <IconButton className=\"header-button\" aria-label=\"save\" onClick={handleOpenSaveDialog}>\n            <SaveIcon style={{ color: iconColor }} />\n          </IconButton>\n        </Fragment>\n      )}\n      <IconButton className=\"header-button\" aria-label=\"print\" onClick={handleOpenPrintDialog}>\n        <PrintIcon style={{ color: iconColor }} />\n      </IconButton>\n      <IconButton className=\"header-button\" aria-label=\"code\" onClick={handleOpenCodeDialog}>\n        <CodeIcon style={{ color: iconColor }} />\n      </IconButton>\n    </header>\n  );\n}\n","import React from 'react';\nimport TextField from '@material-ui/core/TextField';\nimport FormControl from '@material-ui/core/FormControl';\n\nimport { GLOBAL_STATE_ALIAS, FORM_LABELS } from '../utils/constants';\n\nimport useGlobalState from '../useGlobalState';\n\nexport default function FormInput({ type, inputType = 'text', classModifier = '' }) {\n  // Global States\n  const [entry, setEntry] = useGlobalState(GLOBAL_STATE_ALIAS[type]);\n\n  const handleChange = (event) => {\n    setEntry(event.target.value);\n  };\n\n  return (\n    <FormControl className={`form-item form-item--text form-item--${classModifier}`}>\n      <TextField\n        id={GLOBAL_STATE_ALIAS[type]}\n        label={FORM_LABELS[type]}\n        onChange={handleChange}\n        defaultValue={entry}\n        type={inputType}\n      />\n    </FormControl>\n  );\n}\n","import React from 'react';\nimport FormControl from '@material-ui/core/FormControl';\nimport TextField from '@material-ui/core/TextField';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\n\nimport { getTypeahead, getHashData } from '../database';\nimport { getEntryById } from '../utils';\nimport { GLOBAL_STATE_ALIAS, FORM_LABELS } from '../utils/constants';\n\nimport useGlobalState from '../useGlobalState';\n\nexport default function FormAutocomplete({\n  type,\n  classModifier = '',\n  data = null,\n  isDisabled = false,\n}) {\n  // Global States\n  const [entry, setEntry] = useGlobalState(GLOBAL_STATE_ALIAS[type]);\n\n  let entryDict = {};\n  let entryTypeahead = [];\n\n  if (data) {\n    entryDict = data.dict;\n    entryTypeahead = data.typeahead;\n  } else {\n    entryDict = getHashData(type);\n    entryTypeahead = getTypeahead(type);\n  }\n\n  const handleInputChange = (event) => {\n    const index = event?.target.getAttribute('data-option-index');\n    if (entryTypeahead[index]) {\n      const id = entryTypeahead[index].value;\n      setEntry(id);\n    }\n  };\n\n  const handleChange = (_, selectedEntry) => {\n    if (entryDict[selectedEntry?.value]) {\n      setEntry(selectedEntry.value);\n    } else {\n      setEntry(null);\n    }\n  };\n\n  const label = FORM_LABELS[type];\n\n  return (\n    <FormControl className={`form-item form-item--autocomplete form-item--${classModifier}`}>\n      <Autocomplete\n        id={label}\n        options={entryTypeahead}\n        defaultValue={getEntryById(entryTypeahead, entry)}\n        getOptionLabel={(option) => option.text}\n        getOptionSelected={(option) => option.value === entryDict?.[entry]?.id}\n        renderInput={(params) => <TextField {...params} label={label} />}\n        onInputChange={handleInputChange}\n        onChange={handleChange}\n        disabled={isDisabled}\n        autoHighlight\n      />\n    </FormControl>\n  );\n}\n","import React from 'react';\nimport FormControl from '@material-ui/core/FormControl';\nimport TextField from '@material-ui/core/TextField';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\n\nimport { getTypeahead } from '../database';\nimport { getEntriesByIds } from '../utils';\nimport { GLOBAL_STATE_ALIAS, FORM_LABELS } from '../utils/constants';\n\nimport useGlobalState from '../useGlobalState';\n\nexport default function FormAutocompleteMulti({ type, classModifier = '' }) {\n  // Global States\n  const [entry, setEntry] = useGlobalState(GLOBAL_STATE_ALIAS[type]);\n\n  const entryTypeahead = getTypeahead(type);\n\n  const handleChange = (_, newInput) => {\n    const ids = newInput.map((o) => o.value);\n    setEntry(ids);\n  };\n\n  const label = FORM_LABELS[type];\n\n  return (\n    <FormControl className={`form-item form-item--autocomplete form-item--${classModifier}`}>\n      <Autocomplete\n        multiple\n        id={label}\n        options={entryTypeahead}\n        defaultValue={getEntriesByIds(entryTypeahead, entry)}\n        getOptionLabel={(option) => option.text}\n        filterSelectedOptions\n        renderInput={(params) => <TextField {...params} label={label} variant=\"outlined\" />}\n        onChange={handleChange}\n        autoHighlight\n      />\n    </FormControl>\n  );\n}\n","import React from 'react';\nimport FormControl from '@material-ui/core/FormControl';\n\nimport { getHashData } from '../database';\nimport { ATTRIBUTES, TYPES } from '../utils/constants';\n\nimport useGlobalState from '../useGlobalState';\n\nexport default function FormAttributes() {\n  // Global States\n  const [attributes] = useGlobalState('attributes');\n  const [race] = useGlobalState('race');\n\n  const raceData = getHashData(TYPES.RACE)?.[race];\n\n  return (\n    <FormControl className={`form-item form-item--attributes form-item--half`}>\n      <div className=\"attributes-grid attribute-header\">\n        <span className=\"attribute-header-label\">Attributes</span>\n        <span className=\"attribute-header--label\">Attribute Score</span>\n        <span className=\"attribute-sign invisible\">-</span>\n        <span className=\"attribute-header--label\">Racial Modifier</span>\n        <span className=\"attribute-sign invisible\">-</span>\n        <span className=\"attribute-header--label\">Total</span>\n      </div>\n      {Object.entries(ATTRIBUTES).map(([key, name]) => {\n        return (\n          <Attribute\n            key={key}\n            type={key}\n            name={name}\n            modifier={raceData?.[key]}\n            value={attributes[key]}\n            isDisabled={!Boolean(race)}\n          />\n        );\n      })}\n    </FormControl>\n  );\n}\n\nfunction Attribute({ type, name, modifier, value, isDisabled }) {\n  // Global States\n  const [, setAttributes] = useGlobalState('attributes');\n\n  const handleChange = (event) => {\n    setAttributes((s) => ({ ...s, [type]: +event.target.value }));\n  };\n\n  const total = (value ?? 0) + (modifier ?? 0);\n\n  return (\n    <div className=\"attributes-grid attribute\">\n      <label className=\"attribute-label\">\n        <span className=\"attribute-label__key\">{type}</span>\n        <span className=\"attribute-label__name\">{name}</span>\n      </label>\n      <input\n        type=\"number\"\n        className=\"attribute-score\"\n        disabled={isDisabled}\n        defaultValue={value}\n        onChange={handleChange}\n      />\n      <span className=\"attribute-sign\">+</span>\n      <input type=\"number\" className=\"attribute-race-modifier\" value={modifier ?? 0} readOnly />\n      <span className=\"attribute-sign\">=</span>\n      <input\n        type=\"number\"\n        className=\"attribute-race-total\"\n        value={total}\n        min=\"0\"\n        max=\"30\"\n        readOnly\n      />\n    </div>\n  );\n}\n","import React from 'react';\nimport FormControl from '@material-ui/core/FormControl';\nimport TextField from '@material-ui/core/TextField';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\n\nimport { getTypeahead, getHashData } from '../database';\nimport { getEntryById } from '../utils';\nimport { TYPES } from '../utils/constants';\n\nimport useGlobalState from '../useGlobalState';\n\nexport default function FormAlignment() {\n  // Global States\n  const [alignment, setAlignment] = useGlobalState('alignment');\n  const [alignmentPos, setAlignmentPos] = useGlobalState('alignmentPos');\n\n  const alignmentDict = getHashData(TYPES.ALIGNMENT);\n  const alignmentTypeahead = getTypeahead(TYPES.ALIGNMENT);\n\n  const handleInputChange = (event) => {\n    const index = event?.target.getAttribute('data-option-index');\n    if (alignmentTypeahead[index]) {\n      const id = alignmentTypeahead[index].value;\n      setAlignment(id);\n    }\n  };\n\n  const handleChange = (_, selectedEntry) => {\n    if (alignmentDict[selectedEntry?.value]) {\n      setAlignment(selectedEntry.value);\n    } else {\n      setAlignment(null);\n    }\n  };\n\n  const handleChangeAlignmentPos = (event) => {\n    setAlignmentPos(+event.target.id);\n  };\n\n  const alignmentGridPlaceholder = new Array(9).fill(0);\n\n  const alignmentModifiers = alignmentDict?.[alignment]?.values?.split(',').map(Number);\n\n  const activeModifiers = alignmentModifiers ?? alignmentGridPlaceholder;\n\n  return (\n    <FormControl className={`form-item form-item--alignment form-item--half`}>\n      <Autocomplete\n        id=\"alignment\"\n        options={alignmentTypeahead}\n        defaultValue={getEntryById(alignmentTypeahead, alignment)}\n        getOptionLabel={(option) => option.text}\n        getOptionSelected={(option) => option.value === alignmentDict?.[alignment]?.id}\n        renderInput={(params) => <TextField {...params} label=\"Alignment\" />}\n        onInputChange={handleInputChange}\n        onChange={handleChange}\n        autoHighlight\n      />\n      <div className=\"alignment-grid\">\n        <div className=\"alignment-grid__lawful\">Lawful</div>\n        <div className=\"alignment-grid__good\">Good</div>\n        <div className=\"alignment-grid__chaotic\">Chaotic</div>\n        <div className=\"alignment-grid__evil\">Evil</div>\n        <div className=\"alignment-grid__boxes\">\n          {activeModifiers.map((val, index) => {\n            const activeClass = alignmentPos === index ? 'alignment-box--active' : '';\n            return (\n              <button\n                className={`alignment-box ${activeClass}`}\n                id={`${index}`}\n                key={`al-key-${index}`}\n                onClick={handleChangeAlignmentPos}\n                disabled={!Boolean(alignment)}\n              >\n                {val}\n              </button>\n            );\n          })}\n        </div>\n      </div>\n    </FormControl>\n  );\n}\n","import React from 'react';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\n\nimport { GLOBAL_STATE_ALIAS, FORM_LABELS } from '../utils/constants';\n\nimport useGlobalState from '../useGlobalState';\n\nexport default function FormCheckbox({ type, classModifier = '' }) {\n  // Global States\n  const [entry, setEntry] = useGlobalState(GLOBAL_STATE_ALIAS[type]);\n\n  const handleChange = (event) => {\n    setEntry(event.target.checked);\n  };\n\n  return (\n    <FormControl className={`form-item form-item--checkbox form-item--${classModifier}`}>\n      <FormControlLabel\n        control={\n          <Checkbox\n            checked={entry}\n            onChange={handleChange}\n            name={GLOBAL_STATE_ALIAS[type]}\n            color=\"primary\"\n          />\n        }\n        label={FORM_LABELS[type]}\n      />\n    </FormControl>\n  );\n}\n","import React, { useEffect, useState } from 'react';\n\nimport { getHashData } from '../database';\nimport { getMonsterAdventureData, getClassColor } from '../utils';\nimport { TYPES, GLOBAL_STATE_ALIAS } from '../utils/constants';\nimport useGlobalState from '../useGlobalState';\n\n// Components\nimport FormInput from './FormInput';\nimport FormAutocomplete from './FormAutocomplete';\nimport FormAutocompleteMulti from './FormAutocompleteMulti';\nimport FormAttributes from './FormAttributes';\nimport FormAlignment from './FormAlignment';\nimport FormCheckbox from './FormCheckbox';\n\nexport default function Form() {\n  const [monster] = useGlobalState(GLOBAL_STATE_ALIAS[TYPES.MONSTER]);\n  const [characterClass] = useGlobalState(GLOBAL_STATE_ALIAS[TYPES.CLASS]);\n  const [, setColor] = useGlobalState('color');\n  // LocalState\n  const [adventureData, setAdventureData] = useState(null);\n\n  // When a monster is selected, determine available adventure cards for it\n  useEffect(() => {\n    if (monster) {\n      const monsterName = getHashData(TYPES.MONSTER)[monster].name;\n\n      setAdventureData({\n        location: getMonsterAdventureData(TYPES.MONSTER_LOCATION, monsterName),\n        obstacle: getMonsterAdventureData(TYPES.MONSTER_OBSTACLE, monsterName),\n        attack: getMonsterAdventureData(TYPES.MONSTER_ATTACK, monsterName),\n      });\n    }\n  }, [monster]);\n\n  // When a class is selected, set the global color\n  useEffect(() => {\n    setColor(getClassColor(characterClass));\n  }, [characterClass, setColor]);\n\n  return (\n    <main className=\"form\">\n      <FormInput type={TYPES.CHARACTER_NAME} classModifier=\"half\" />\n      <FormInput type={TYPES.PLAYER} classModifier=\"half\" />\n      <FormAutocomplete type={TYPES.RACE} classModifier=\"quarter\" />\n      <FormAutocomplete type={TYPES.CLASS} classModifier=\"quarter\" />\n      <FormAutocomplete type={TYPES.GENDER} classModifier=\"quarter\" />\n      <FormAutocomplete type={TYPES.BACKSTORY} classModifier=\"quarter\" />\n      <FormAttributes />\n      <FormAlignment />\n      <FormAutocompleteMulti type={TYPES.MARKET_ARMOR} classModifier=\"half\" />\n      <FormAutocompleteMulti type={TYPES.MARKET_WEAPON} classModifier=\"half\" />\n      <FormAutocompleteMulti type={TYPES.MARKET_SKILL} classModifier=\"half\" />\n      <FormAutocompleteMulti type={TYPES.MARKET_TRAIT} classModifier=\"half\" />\n      <FormAutocompleteMulti type={TYPES.MARKET_SCROLL} classModifier=\"half\" />\n      <FormAutocompleteMulti type={TYPES.MINION} classModifier=\"half\" />\n      <hr />\n      <FormAutocomplete type={TYPES.MONSTER} classModifier=\"half\" />\n      <FormCheckbox type={TYPES.MONSTER_LENTICULAR} classModifier=\"half\" />\n      <FormAutocomplete\n        type={TYPES.MONSTER_LOCATION}\n        classModifier=\"quarter\"\n        isDisabled={!monster}\n        data={adventureData?.location}\n      />\n      <FormAutocomplete\n        type={TYPES.MONSTER_OBSTACLE}\n        classModifier=\"quarter\"\n        isDisabled={!monster}\n        data={adventureData?.obstacle}\n      />\n      <FormAutocomplete\n        type={TYPES.MONSTER_ATTACK}\n        classModifier=\"quarter\"\n        isDisabled={!monster}\n        data={adventureData?.attack}\n      />\n      <FormInput type={TYPES.MONSTER_SCORE} inputType=\"number\" classModifier=\"quarter\" />\n      <hr />\n      <FormAutocomplete type={TYPES.FAMILIAR} classModifier=\"half\" />\n      <FormInput type={TYPES.FAMILIAR_POWER} inputType=\"number\" classModifier=\"quarter\" />\n      <FormInput type={TYPES.FAMILIAR_NAME} classModifier=\"quarter\" />\n      <FormAutocompleteMulti type={TYPES.FIENDS} classModifier=\"half\" />\n      <hr />\n      <FormInput type={TYPES.XP} inputType=\"number\" classModifier=\"quarter\" />\n      <FormInput type={TYPES.GOLD} inputType=\"number\" classModifier=\"quarter\" />\n      <FormInput type={TYPES.SCORE} inputType=\"number\" classModifier=\"quarter\" />\n      <FormInput type={TYPES.DATE} inputType=\"date\" classModifier=\"quarter\" />\n    </main>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\n\nimport { REFRESH_TIMER } from '../utils/constants';\n\nfunction CircularProgressWithLabel({ value }) {\n  return (\n    <Box position=\"relative\" display=\"inline-flex\">\n      <CircularProgress variant=\"static\" value={value} />\n      <Box\n        top={0}\n        left={0}\n        bottom={0}\n        right={0}\n        position=\"absolute\"\n        display=\"flex\"\n        alignItems=\"center\"\n        justifyContent=\"center\"\n      >\n        <Typography variant=\"caption\" component=\"div\" color=\"textSecondary\">{`${Math.round(\n          value\n        )}%`}</Typography>\n      </Box>\n    </Box>\n  );\n}\n\nexport default function Refreshing() {\n  const [progress, setProgress] = useState(1);\n\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setProgress((prevProgress) => (prevProgress >= 100 ? 100 : prevProgress + 10));\n    }, REFRESH_TIMER / 10);\n    return () => {\n      clearInterval(timer);\n    };\n  }, []);\n\n  return (\n    <main className=\"form form--refreshing\">\n      <CircularProgressWithLabel value={progress} />\n    </main>\n  );\n}\n","import React, { useCallback, useEffect, forwardRef } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Slide from '@material-ui/core/Slide';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\n\nimport useGlobalState, { getCompleteGlobalState } from '../useGlobalState';\nimport { DIALOGS } from '../utils/constants';\nimport {\n  determineCharacterCompletion,\n  getCharacterJsonApi,\n  getCharacterTextString,\n} from '../utils';\n\nconst Transition = forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nexport default function CodeDialog() {\n  const [activeDialog, setActiveDialog] = useGlobalState('activeDialog');\n  const [characterObject, setCharacterObject] = useGlobalState('characterObject');\n  const [isCharacterComplete, setIsCharacterComplete] = useGlobalState('isCharacterComplete');\n  const [, setIsCharacterGenerated] = useGlobalState('isCharacterGenerated');\n\n  useEffect(() => {\n    try {\n      const referenceObj = getCompleteGlobalState();\n      setIsCharacterComplete(determineCharacterCompletion(referenceObj));\n      setCharacterObject(getCharacterJsonApi(referenceObj));\n      setIsCharacterGenerated(true);\n    } catch (err) {\n      console.error(err);\n      setIsCharacterGenerated(false);\n    }\n    // eslint-disable-next-line\n  }, []);\n\n  const handleCloseDialog = () => {\n    setActiveDialog(null);\n  };\n\n  const saveTextFile = useCallback(() => {\n    const referenceObj = getCompleteGlobalState();\n    const a = document.createElement('a');\n    const file = new Blob([getCharacterTextString(referenceObj)], { type: 'text/plain' });\n    a.href = URL.createObjectURL(file);\n    const characterName = referenceObj.characterName?.toLowerCase() ?? 'untitled';\n    a.download = `${characterName}-hero-totem.txt`;\n    a.click();\n  }, []);\n\n  return (\n    <Dialog\n      open={activeDialog === DIALOGS.CODE}\n      TransitionComponent={Transition}\n      keepMounted\n      onClose={handleCloseDialog}\n    >\n      <DialogTitle>Character Sheet JSON</DialogTitle>\n      <DialogContent>\n        <pre>{JSON.stringify(characterObject, null, 4)}</pre>\n      </DialogContent>\n      <DialogActions>\n        {!isCharacterComplete && (\n          <span className=\"dialog-alert\">This character sheet is incomplete</span>\n        )}\n        <Button onClick={saveTextFile} color=\"primary\" disabled={!isCharacterComplete}>\n          <CloudDownloadIcon /> Download\n        </Button>\n        <Button onClick={handleCloseDialog} color=\"primary\">\n          Close\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import firebase from 'firebase/app';\nimport 'firebase/database';\nimport 'firebase/functions';\n\nconst config = {\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\n  measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENT_ID,\n};\n\nconst fb = firebase.initializeApp(config);\n\nexport const API_FUNCTIONS = fb.functions();\n\nexport default fb.database();\n","import React, { forwardRef, useEffect, useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport OpenInBrowserIcon from '@material-ui/icons/OpenInBrowser';\nimport Slide from '@material-ui/core/Slide';\n\nimport { getHashData } from '../database';\nimport { API_FUNCTIONS } from '../firebase';\nimport useGlobalState, { setCompleteGlobalState, initialState } from '../useGlobalState';\nimport { loadCharacterFromDatabase } from '../utils';\nimport { DIALOGS, TYPES, SCREENS, REFRESH_TIMER } from '../utils/constants';\n\nconst API = {\n  getCharacters: API_FUNCTIONS.httpsCallable('getRollPlayerCharacters'),\n};\n\nconst Transition = forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nexport default function ImportDialog() {\n  // Global States\n  const [activeDialog, setActiveDialog] = useGlobalState('activeDialog');\n  const [, setScreen] = useGlobalState('screen');\n  // Local states\n  const [isLoading, setIsLoading] = useState(true);\n  const [selectedCharacterId, setSelectedCharacterId] = useState(null);\n  const [characters, setCharacters] = useState([]);\n\n  useEffect(() => {\n    async function getCharacters() {\n      try {\n        setIsLoading(true);\n        const response = await API.getCharacters();\n        setCharacters(response.data);\n      } catch (err) {\n        console.error(err);\n      } finally {\n        setIsLoading(false);\n      }\n    }\n\n    getCharacters();\n  }, []);\n\n  const handleCloseDialog = () => {\n    setActiveDialog(null);\n  };\n\n  const handleLoadCharacter = () => {\n    setActiveDialog(null);\n    setScreen(SCREENS.REFRESH);\n\n    setTimeout(() => {\n      setCompleteGlobalState(\n        loadCharacterFromDatabase(characters, selectedCharacterId, initialState)\n      );\n      setScreen(SCREENS.FORM);\n    }, REFRESH_TIMER);\n  };\n\n  const handleSelectCharacter = (event) => {\n    setSelectedCharacterId(event.target.id);\n  };\n\n  return (\n    <Dialog\n      open={activeDialog === DIALOGS.IMPORT}\n      TransitionComponent={Transition}\n      keepMounted\n      onClose={handleCloseDialog}\n    >\n      <DialogTitle>Load Character</DialogTitle>\n      <DialogContent>\n        {isLoading ? (\n          <div className=\"import-list__loading\">\n            <CircularProgress />\n          </div>\n        ) : (\n          <ul className=\"import-list\">\n            {characters.map((character) => {\n              const selectedClass =\n                character.id === selectedCharacterId ? 'import-list__character--active' : '';\n              return (\n                <li key={character.id} className={`import-list__character ${selectedClass}`}>\n                  <button onClick={handleSelectCharacter} id={character.id}>\n                    <b>{character.name}</b>, a{' '}\n                    {getHashData(TYPES.RACE)[character.race].name ?? 'character'} created by{' '}\n                    {character.player}\n                  </button>\n                </li>\n              );\n            })}\n          </ul>\n        )}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleCloseDialog} color=\"secondary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={handleLoadCharacter}\n          color=\"primary\"\n          disabled={isLoading || !Boolean(selectedCharacterId)}\n        >\n          <OpenInBrowserIcon /> Load Character\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { forwardRef, useEffect } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Slide from '@material-ui/core/Slide';\nimport PrintIcon from '@material-ui/icons/Print';\n\nimport useGlobalState, { getCompleteGlobalState } from '../useGlobalState';\nimport { DIALOGS } from '../utils/constants';\n\nimport { determineCharacterCompletion, getCharacterJsonApi } from '../utils';\n\nconst Transition = forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nexport default function PrintDialog() {\n  const [activeDialog, setActiveDialog] = useGlobalState('activeDialog');\n  const [characterObject, setCharacterObject] = useGlobalState('characterObject');\n  const [, setIsCharacterComplete] = useGlobalState('isCharacterComplete');\n  const [, setIsCharacterGenerated] = useGlobalState('isCharacterGenerated');\n\n  useEffect(() => {\n    try {\n      const referenceObj = getCompleteGlobalState();\n      setIsCharacterComplete(determineCharacterCompletion(referenceObj));\n      setCharacterObject(getCharacterJsonApi(referenceObj));\n      setIsCharacterGenerated(true);\n    } catch (err) {\n      console.error(err);\n      setIsCharacterGenerated(false);\n    }\n    // eslint-disable-next-line\n  }, []);\n\n  const handleCloseDialog = () => {\n    setActiveDialog(null);\n  };\n\n  const handlePrint = () => {\n    window.localStorage.setItem('roll-player-sheet', JSON.stringify(characterObject));\n    setActiveDialog(null);\n  };\n\n  return (\n    <Dialog\n      open={activeDialog === DIALOGS.PRINT}\n      TransitionComponent={Transition}\n      keepMounted\n      onClose={handleCloseDialog}\n    >\n      <DialogTitle>Print Character</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          You may print the character sheet for Roll Player or for Roll Player Adventures\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleCloseDialog} color=\"secondary\">\n          Cancel\n        </Button>\n        <Button onClick={handlePrint} color=\"primary\" disabled>\n          <PrintIcon /> Print RPA\n        </Button>\n        <Button onClick={handlePrint} color=\"primary\" disabled>\n          <PrintIcon /> Print RP\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { forwardRef, useState, useEffect } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Slide from '@material-ui/core/Slide';\nimport SaveIcon from '@material-ui/icons/Save';\nimport TextField from '@material-ui/core/TextField';\nimport FormControl from '@material-ui/core/FormControl';\n\nimport { API_FUNCTIONS } from '../firebase';\n\nimport useGlobalState, { getCompleteGlobalState } from '../useGlobalState';\nimport { DIALOGS } from '../utils/constants';\nimport { determineCharacterCompletion, deserializeCharacter } from '../utils';\n\nconst API = {\n  saveCharacter: API_FUNCTIONS.httpsCallable('postRollPlayerCharacter'),\n  updateCharacter: API_FUNCTIONS.httpsCallable('putRollPlayerCharacter'),\n};\n\nconst Transition = forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nexport default function SaveDialog() {\n  const [activeDialog, setActiveDialog] = useGlobalState('activeDialog');\n  const [characterId, setCharacterId] = useGlobalState('characterId');\n  const [deserializedCharacter, setDeserializedCharacter] = useGlobalState('deserializedCharacter');\n  const [isCharacterComplete, setIsCharacterComplete] = useGlobalState('isCharacterComplete');\n  const [, setIsCharacterGenerated] = useGlobalState('isCharacterGenerated');\n  // Local States\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [pw, setPW] = useState(null);\n  const [email, setEmail] = useState(null);\n\n  useEffect(() => {\n    try {\n      const referenceObj = getCompleteGlobalState();\n      setIsCharacterComplete(determineCharacterCompletion(referenceObj));\n      setDeserializedCharacter(deserializeCharacter(referenceObj));\n      setIsCharacterGenerated(true);\n    } catch (err) {\n      console.error(err);\n      setIsCharacterGenerated(false);\n    }\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    if (pw && email) {\n      setIsLoggedIn(true);\n    }\n  }, [pw, email, setIsLoggedIn]);\n\n  const handleCloseDialog = () => {\n    setActiveDialog(null);\n  };\n\n  const handleSave = async () => {\n    try {\n      if (isCharacterComplete) {\n        let response;\n        if (characterId) {\n          response = await API.updateCharacter({\n            id: characterId,\n            ...deserializedCharacter,\n          });\n        } else {\n          response = await API.saveCharacter(deserializedCharacter);\n        }\n\n        setCharacterId(response.id);\n        setActiveDialog(null);\n      } else {\n        throw Error('Character is not complete');\n      }\n    } catch (err) {\n      console.error(err);\n      alert(err);\n    }\n  };\n\n  return (\n    <Dialog\n      open={activeDialog === DIALOGS.SAVE}\n      TransitionComponent={Transition}\n      keepMounted\n      onClose={handleCloseDialog}\n      className=\"\"\n    >\n      <DialogTitle>Save Character</DialogTitle>\n      <DialogContent>\n        {!isLoggedIn && (\n          <FormControl className=\"save-login-form\">\n            <h3>Login</h3>\n            <TextField\n              id=\"email\"\n              label=\"E-mail\"\n              onChange={(e) => setEmail(e.target.value)}\n              type=\"email\"\n            />\n            <TextField\n              id=\"password\"\n              label=\"Password\"\n              onChange={(e) => setPW(e.target.value)}\n              type=\"password\"\n            />\n            <Button onClick={handleCloseDialog} variant=\"contained\" color=\"primary\">\n              Login\n            </Button>\n          </FormControl>\n        )}\n      </DialogContent>\n      <DialogActions>\n        {!isCharacterComplete && (\n          <span className=\"dialog-alert\">This character sheet is incomplete</span>\n        )}\n        <Button onClick={handleCloseDialog} color=\"secondary\">\n          Close\n        </Button>\n        <Button onClick={handleSave} color=\"primary\" disabled={!isLoggedIn || !isCharacterComplete}>\n          <SaveIcon /> {characterId ? 'Update' : 'Save'}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React from 'react';\nimport Container from '@material-ui/core/Container';\n\nimport Header from './Header';\n\nimport Form from './Form';\nimport Refreshing from './Refreshing';\n\nimport CodeDialog from './CodeDialog';\nimport ImportDialog from './ImportDialog';\nimport PrintDialog from './PrintDialog';\nimport SaveDialog from './SaveDialog';\n\nimport { DIALOGS, SCREENS } from '../utils/constants';\nimport useGlobalState from '../useGlobalState';\n\nconst activeComponent = {\n  [SCREENS.FORM]: <Form />,\n  [SCREENS.REFRESH]: <Refreshing />,\n};\n\nconst activeDialogComponent = {\n  [DIALOGS.CODE]: <CodeDialog />,\n  [DIALOGS.IMPORT]: <ImportDialog />,\n  [DIALOGS.PRINT]: <PrintDialog />,\n  [DIALOGS.SAVE]: <SaveDialog />,\n};\n\nexport default function App() {\n  const [screen] = useGlobalState('screen');\n  const [activeDialog] = useGlobalState('activeDialog');\n\n  return (\n    <Container maxWidth=\"lg\" className=\"app-container\">\n      <Header />\n      {activeComponent[screen]}\n      {activeDialogComponent[activeDialog]}\n    </Container>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as serviceWorker from './serviceWorker';\n\nimport './stylesheets/index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nserviceWorker.unregister();\n"],"sourceRoot":""}